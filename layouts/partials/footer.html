<footer class="mt-5 py-4 text-center">
  <div class="container">
    <a class="mb-0" href="https://github.com/enochyu-official" target="_blank" rel="noopener noreferrer">
      &copy; {{ now.Year }} {{ .Site.Params.author }}. All Rights Reserved.
    </a>
  </div>

  <script>
    var t = setInterval(function() {
      if (window.goatcounter && window.goatcounter.visit_count) {
        clearInterval(t)
        window.goatcounter.visit_count({append: 'body'})
      }
    }, 100)
  </script>
  <script data-goatcounter="https://enochyu.goatcounter.com/count"
        async src="//gc.zgo.at/count.v5.js"
        crossorigin="anonymous"
        integrity="sha384-atnOLvQb9t+jTSipvd75X2yginT4PjVbqDdlJAmxMm+wYElFmeR6EmLP5bYeoRVQ"></script>

  <script>
    window.goatcounter.visit_count({append: '#gc-total-views'});

    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const path = window.location.pathname;
        const url = `https://enochyugoatcounter.com/counter/${encodeURIComponent(path)}.json`;

        fetch(url)
          .then(response => response.json())
          .then(data => {
            const el = document.querySelector('#gc-total-views');
            if (el) el.innerText = data.count;
          })
          .catch(err => console.error("GoatCounter fetch error:", err));
      }, 500);
    });
  </script>

  <script>
    function updateViewCounts() {
      const counters = document.querySelectorAll(".page-views");

      counters.forEach(el => {
        let path = el.getAttribute("data-gc-path") || "";

        path = path.replace(/^\/+|\/+$/g, "");

        const gcPath = path === "" ? "/" : path;
        const url = `https://enochyu.goatcounter.com/counter/${encodeURIComponent(gcPath)}.json`;

        fetch(url)
          .then(r => {
            if (!r.ok) {
              throw new Error(`HTTP ${r.status}`);
            }
            return r.json();
          })

          .then(d => {
            el.textContent = d.count || "0";
          })

          .catch(err => {
            console.error("GoatCounter Error for path:", path, err);
            el.textContent = "0";
          });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', updateViewCounts);
    } else {
      updateViewCounts();
    }
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-svg.js"></script>
</footer>
